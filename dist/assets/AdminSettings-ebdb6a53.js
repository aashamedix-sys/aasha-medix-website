import{aw as g,r,j as e,D as N,C as u,G as x,H as h,J as f,I as i,B as v,L as y,c as p,t as n}from"./index-4e8604e8.js";const C=()=>{const{user:t}=g(),[d,o]=r.useState(!1),[s,l]=r.useState({current:"",new:"",confirm:""}),[m,j]=r.useState({name:"",email:""});r.useEffect(()=>{t&&(async()=>{const{data:c}=await p.from("staff").select("*").eq("user_id",t.id).single();j({name:(c==null?void 0:c.name)||"",email:t.email||""})})()},[t]);const w=async()=>{if(s.new!==s.confirm){n({title:"Error",description:"Passwords do not match",variant:"destructive"});return}if(s.new.length<6){n({title:"Error",description:"Password must be at least 6 characters",variant:"destructive"});return}o(!0);const{error:a}=await p.auth.updateUser({password:s.new});a?n({title:"Update Failed",description:a.message,variant:"destructive"}):(n({title:"Success",description:"Password updated successfully"}),l({current:"",new:"",confirm:""})),o(!1)};return e.jsx(N,{title:"Admin Settings",children:e.jsxs("div",{className:"max-w-2xl space-y-6",children:[e.jsxs(u,{children:[e.jsx(x,{children:e.jsx(h,{children:"Profile Settings"})}),e.jsx(f,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Admin Name"}),e.jsx(i,{value:m.name,disabled:!0,className:"bg-gray-50"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Name is managed in Staff Directory"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Email"}),e.jsx(i,{value:m.email,disabled:!0,className:"bg-gray-50"})]})]})})]}),e.jsxs(u,{children:[e.jsx(x,{children:e.jsx(h,{children:"Security"})}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"New Password"}),e.jsx(i,{type:"password",value:s.new,onChange:a=>l({...s,new:a.target.value}),placeholder:"••••••••"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Confirm New Password"}),e.jsx(i,{type:"password",value:s.confirm,onChange:a=>l({...s,confirm:a.target.value}),placeholder:"••••••••"})]}),e.jsx(v,{variant:"outline",className:"text-red-600 border-red-200 hover:bg-red-50 mt-2",onClick:w,disabled:d||!s.new,children:d?e.jsx(y,{className:"w-4 h-4 animate-spin mr-2"}):"Change Password"})]})]})]})})};export{C as default};
